<!DOCTYPE html>
<html>
<head>
    <title>Expense Tracker</title>
</head>

<body style="
    margin:0;
    font-family: Arial, sans-serif;
    background: linear-gradient(120deg, #667eea, #764ba2);
    min-height:100vh;
    display:flex;
    align-items:center;
    justify-content:center;
">

<div style="
    background:#fff;
    padding:30px;
    width:400px;
    border-radius:8px;
    box-shadow:0 10px 25px rgba(0,0,0,0.2);
">

    <h2 style="text-align:center;margin-bottom:20px;">Add Expense</h2>

    <input id="cat" placeholder="Category"
        style="width:100%;padding:10px;margin-bottom:10px;">

    <input id="amt" placeholder="Amount" type="number"
        style="width:100%;padding:10px;margin-bottom:15px;">

    <button onclick="add()"
        style="
            width:100%;
            padding:10px;
            background:#667eea;
            color:white;
            border:none;
            font-size:16px;
            cursor:pointer;
        ">
        Add Expense
    </button>

    <h3 style="margin-top:25px;">Expenses</h3>

    <ul id="list" style="
        list-style:none;
        padding:0;
        max-height:200px;
        overflow-y:auto;
    "></ul>

</div>

<script>
    if (!localStorage.getItem("loggedInUser")) {
        window.location.href = "login.html";
    }

    function load() {
        fetch('http://localhost:8080/api/expenses')
            .then(r => r.json())
            .then(d => {
                list.innerHTML = '';
                d.forEach(e => {
                    list.innerHTML += `
                        <li style="
                            padding:8px;
                            border-bottom:1px solid #ddd;
                            display:flex;
                            justify-content:space-between;
                        ">
                            <span>${e.category}</span>
                            <strong>â‚¹ ${e.amount}</strong>
                        </li>`;
                });
            });
    }

    function add() {
        fetch('http://localhost:8080/api/expenses', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({
                category: cat.value,
                amount: amt.value
            })
        }).then(() => {
            cat.value = '';
            amt.value = '';
            load();
        });
    }

    load();
</script>

</body>
</html>
